{"version":3,"file":"tab.nomodule.min.js","sources":["../../../.config/config.js","../../../src/core/api.js","../../../src/component/tab/script/tab/tab-button.js","../../../src/component/tab/script/tab/tab-selector.js","../../../src/component/tab/script/tab/tab-panel.js","../../../src/component/tab/script/tab/tabs-group.js","../../../src/component/tab/script/tab/tabs-list.js","../../../src/component/tab/index.js","../../../src/component/tab/main.js"],"sourcesContent":["const config = {\r\n  prefix: 'fr',\r\n  namespace: 'dsfr',\r\n  organisation: '@gouvfr',\r\n  version: '1.2.1'\r\n};\r\n\r\nexport default config;\r\n","import config from './config.js';\nconst api = window[config.namespace];\nexport default api;\n","import api from '../../api.js';\n\n/**\n  * TabButton correspond au bouton cliquable qui change le panel\n  * TabButton étend de DisclosureButton qui ajoute/enelve l'attribut aria-selected,\n  * Et change l'attributte tabindex a 0 si le boutton est actif (value=true), -1 s'il n'est pas actif (value=false)\n */\nclass TabButton extends api.core.DisclosureButton {\n  constructor () {\n    super(api.core.DisclosureType.SELECT);\n  }\n\n  static get instanceClassName () {\n    return 'TabButton';\n  }\n\n  apply (value) {\n    super.apply(value);\n    if (this.isPrimary) {\n      this.setAttribute('tabindex', value ? '0' : '-1');\n      if (value) {\n        if (this.list) this.list.focalize(this);\n      }\n    }\n  }\n\n  get list () {\n    return this.element.getAscendantInstance('TabsList', 'TabsGroup');\n  }\n}\n\nexport { TabButton };\n","import api from '../../api.js';\n\nexport const TabSelector = {\n  TAB: api.internals.ns.selector('tabs__tab'),\n  GROUP: api.internals.ns.selector('tabs'),\n  PANEL: api.internals.ns.selector('tabs__panel'),\n  LIST: api.internals.ns.selector('tabs__list'),\n  SHADOW: api.internals.ns.selector('tabs__shadow'),\n  SHADOW_LEFT: api.internals.ns.selector('tabs__shadow--left'),\n  SHADOW_RIGHT: api.internals.ns.selector('tabs__shadow--right')\n};\n","import api from '../../api.js';\nimport { TabButton } from './tab-button.js';\nimport { TabSelector } from './tab-selector.js';\n\n/**\n  * Tab coorespond au panel d'un élement Tabs (tab panel)\n  * Tab étend disclosure qui ajoute/enleve le modifier --selected,\n  * et ajoute/eleve l'attribut hidden, sur le panel\n  */\nclass TabPanel extends api.core.Disclosure {\n  constructor () {\n    super(api.core.DisclosureType.SELECT, TabSelector.PANEL, TabButton, 'TabsGroup');\n  }\n\n  static get instanceClassName () {\n    return 'TabPanel';\n  }\n\n  translate (direction, initial) {\n    this.style.transition = initial ? 'none' : '';\n    this.style.transform = `translate(${direction * 100}%)`;\n  }\n\n  reset () {\n    this.group.index = 0;\n  }\n}\n\nexport { TabPanel };\n","import api from '../../api.js';\n\n/**\n* TabGroup est la classe étendue de DiscosuresGroup\n* Correspond à un objet Tabs avec plusieurs tab-button & Tab (panel)\n*/\nclass TabsGroup extends api.core.DisclosuresGroup {\n  constructor () {\n    super('TabPanel');\n  }\n\n  static get instanceClassName () {\n    return 'TabsGroup';\n  }\n\n  init () {\n    super.init();\n    this.listen('transitionend', this.transitionend.bind(this));\n    this.listenKey(api.core.KeyCodes.RIGHT, this.pressRight.bind(this), true, true);\n    this.listenKey(api.core.KeyCodes.LEFT, this.pressLeft.bind(this), true, true);\n    this.listenKey(api.core.KeyCodes.HOME, this.pressHome.bind(this), true, true);\n    this.listenKey(api.core.KeyCodes.END, this.pressEnd.bind(this), true, true);\n    this.isRendering = true;\n\n    if (this.list) this.list.apply();\n  }\n\n  get list () {\n    return this.element.getDescendantInstances('TabsList', 'TabsGroup', true)[0];\n  }\n\n  transitionend (e) {\n    this.style.transition = 'none';\n  }\n\n  get buttonHasFocus () {\n    return this.members.some(member => member.buttonHasFocus);\n  }\n\n  /**\n   * Selectionne l'element suivant de la liste si on est sur un bouton\n   * Si on est à la fin on retourne au début\n   */\n  pressRight () {\n    if (this.buttonHasFocus) {\n      if (this.index < this.length - 1) {\n        this.index++;\n      } else {\n        this.index = 0;\n      }\n\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne l'element précédent de la liste si on est sur un bouton\n   * Si on est au debut retourne a la fin\n   */\n  pressLeft () {\n    if (this.buttonHasFocus) {\n      if (this.index > 0) {\n        this.index--;\n      } else {\n        this.index = this.length - 1;\n      }\n\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne le permier element de la liste si on est sur un bouton\n   */\n  pressHome () {\n    if (this.buttonHasFocus) {\n      this.index = 0;\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne le dernier element de la liste si on est sur un bouton\n   */\n  pressEnd () {\n    if (this.buttonHasFocus) {\n      this.index = this.length - 1;\n      this.focus();\n    }\n  };\n\n  focus () {\n    if (this.current) {\n      this.current.focus();\n    }\n  }\n\n  apply () {\n    for (let i = 0; i < this._index; i++) this.members[i].translate(-1);\n    this.current.style.transition = '';\n    this.current.style.transform = '';\n    for (let i = this._index + 1; i < this.length; i++) this.members[i].translate(1);\n    this.style.transition = '';\n  }\n\n  render () {\n    if (this.current === null) return;\n    const paneHeight = Math.round(this.current.node.offsetHeight);\n    if (this.panelHeight === paneHeight) return;\n    this.panelHeight = paneHeight;\n    let listHeight = 0;\n    if (this.list) listHeight = this.list.node.offsetHeight;\n    this.style.height = (this.panelHeight + listHeight) + 'px';\n  }\n}\n\nexport { TabsGroup };\n","import api from '../../api.js';\nimport { TabSelector } from './tab-selector';\n\nconst FOCALIZE_OFFSET = 16;\nconst SCROLL_OFFSET = 16; // valeur en px du scroll avant laquelle le shadow s'active ou se desactive\n\nclass TabsList extends api.core.Instance {\n  static get instanceClassName () {\n    return 'TabsList';\n  }\n\n  init () {\n    this.listen('scroll', this.scroll.bind(this));\n    this.isResizing = true;\n  }\n\n  get group () {\n    return this.element.getAscendantInstance('TabsGroup', 'TabsList');\n  }\n\n  focalize (btn) {\n    const btnRect = btn.getRect();\n    const listRect = this.getRect();\n    const actualScroll = this.node.scrollLeft;\n    if (btnRect.left < listRect.left) this.node.scrollTo(actualScroll - listRect.left + btnRect.left - FOCALIZE_OFFSET, 0);\n    else if (btnRect.right > listRect.right) this.node.scrollTo(actualScroll - listRect.right + btnRect.right + FOCALIZE_OFFSET, 0);\n  }\n\n  get isScrolling () {\n    return this._isScrolling;\n  }\n\n  set isScrolling (value) {\n    if (this._isScrolling === value) return;\n    this._isScrolling = value;\n    this.apply();\n  }\n\n  apply () {\n    if (!this.group) return;\n    if (this._isScrolling) {\n      this.group.addClass(TabSelector.SHADOW);\n      this.scroll();\n    } else {\n      this.group.removeClass(TabSelector.SHADOW_RIGHT);\n      this.group.removeClass(TabSelector.SHADOW_LEFT);\n      this.group.removeClass(TabSelector.SHADOW);\n    }\n  }\n\n  /* ajoute la classe fr-table__shadow-left ou fr-table__shadow-right sur fr-table en fonction d'une valeur de scroll et du sens (right, left) */\n  scroll () {\n    if (!this.group) return;\n    const scrollLeft = this.node.scrollLeft;\n    const isMin = scrollLeft <= SCROLL_OFFSET;\n    const max = this.node.scrollWidth - this.node.clientWidth - SCROLL_OFFSET;\n\n    const isMax = Math.abs(scrollLeft) >= max;\n    const isRtl = document.documentElement.getAttribute('dir') === 'rtl';\n    const minSelector = isRtl ? TabSelector.SHADOW_RIGHT : TabSelector.SHADOW_LEFT;\n    const maxSelector = isRtl ? TabSelector.SHADOW_LEFT : TabSelector.SHADOW_RIGHT;\n\n    if (isMin) {\n      this.group.removeClass(minSelector);\n    } else {\n      this.group.addClass(minSelector);\n    }\n\n    if (isMax) {\n      this.group.removeClass(maxSelector);\n    } else {\n      this.group.addClass(maxSelector);\n    }\n  }\n\n  resize () {\n    this.isScrolling = this.node.scrollWidth > this.node.clientWidth + SCROLL_OFFSET;\n  }\n\n  dispose () {\n    this.isScrolling = false;\n  }\n}\n\nexport { TabsList };\n","import api from './api.js';\nimport { TabPanel } from './script/tab/tab-panel.js';\nimport { TabButton } from './script/tab/tab-button.js';\nimport { TabsGroup } from './script/tab/tabs-group.js';\nimport { TabsList } from './script/tab/tabs-list.js';\nimport { TabSelector } from './script/tab/tab-selector.js';\n\napi.tab = {\n  TabPanel: TabPanel,\n  TabButton: TabButton,\n  TabsGroup: TabsGroup,\n  TabsList: TabsList,\n  TabSelector: TabSelector\n};\n\nexport default api;\n","import api from './index.js';\n\napi.internals.register(api.tab.TabSelector.PANEL, api.tab.TabPanel);\napi.internals.register(api.tab.TabSelector.GROUP, api.tab.TabsGroup);\napi.internals.register(api.tab.TabSelector.LIST, api.tab.TabsList);\n\nexport default api;\n"],"names":["const","api","window","TabButton","super","core","DisclosureType","SELECT","staticAccessors","instanceClassName","apply","value","this","isPrimary","setAttribute","list","focalize","prototypeAccessors","element","getAscendantInstance","DisclosureButton","TabSelector","TAB","internals","ns","selector","GROUP","PANEL","LIST","SHADOW","SHADOW_LEFT","SHADOW_RIGHT","TabPanel","translate","direction","initial","style","transition","transform","reset","group","index","Disclosure","TabsGroup","init","listen","transitionend","bind","listenKey","KeyCodes","RIGHT","pressRight","LEFT","pressLeft","HOME","pressHome","END","pressEnd","isRendering","getDescendantInstances","e","buttonHasFocus","members","some","member","length","focus","current","let","i","_index","render","paneHeight","Math","round","node","offsetHeight","panelHeight","listHeight","height","DisclosuresGroup","TabsList","scroll","isResizing","btn","btnRect","getRect","listRect","actualScroll","scrollLeft","left","scrollTo","right","isScrolling","_isScrolling","addClass","removeClass","isMin","max","scrollWidth","clientWidth","isMax","abs","isRtl","document","documentElement","getAttribute","minSelector","maxSelector","resize","dispose","Instance","tab","register"],"mappings":"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"}